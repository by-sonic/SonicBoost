<ui:FluentWindow
    x:Class="SonicBoost.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="SonicBoost"
    Width="1100"
    Height="720"
    MinWidth="900"
    MinHeight="600"
    ExtendsContentIntoTitleBar="True"
    WindowBackdropType="Mica"
    WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0" Background="#111318" Width="240">
            <DockPanel>
                <!-- Header -->
                <StackPanel DockPanel.Dock="Top" Margin="20,20,20,12">
                    <TextBlock
                        Text="SonicBoost"
                        FontSize="24"
                        FontWeight="Bold"
                        Foreground="{StaticResource SonicAccentBrush}" />
                    <TextBlock
                        Text="Оптимизация Windows для игр"
                        FontSize="12"
                        Foreground="#8892A0"
                        Margin="0,4,0,0" />
                </StackPanel>

                <!-- Admin Warning -->
                <Border
                    x:Name="AdminWarning"
                    DockPanel.Dock="Bottom"
                    CornerRadius="8"
                    Padding="10,8"
                    Margin="14,4,14,0"
                    Background="#33FF4444"
                    Visibility="Collapsed">
                    <TextBlock
                        Text="⚠ Нет прав администратора. Твики не будут работать!"
                        Foreground="#FF6B6B"
                        FontSize="11"
                        TextWrapping="Wrap"
                        TextAlignment="Center" />
                </Border>

                <!-- Log Button -->
                <StackPanel DockPanel.Dock="Bottom" Orientation="Horizontal" Margin="14,6,14,4" HorizontalAlignment="Center">
                    <Button
                        Content="Открыть лог"
                        Click="OpenLogFile_Click"
                        FontSize="11"
                        Padding="10,4"
                        Background="#18FFFFFF"
                        Foreground="#9EA7B8"
                        BorderThickness="0"
                        Cursor="Hand" />
                    <Button
                        Content="Папка логов"
                        Click="OpenLogFolder_Click"
                        FontSize="11"
                        Padding="10,4"
                        Margin="6,0,0,0"
                        Background="#18FFFFFF"
                        Foreground="#9EA7B8"
                        BorderThickness="0"
                        Cursor="Hand" />
                </StackPanel>

                <!-- SonicVPN Card at bottom -->
                <Border
                    DockPanel.Dock="Bottom"
                    CornerRadius="10"
                    Padding="14,12"
                    Margin="14,10,14,16"
                    Cursor="Hand"
                    MouseLeftButtonUp="SonicVpnCard_Click">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#1A1E90FF" Offset="0" />
                            <GradientStop Color="#1A00D4AA" Offset="1" />
                        </LinearGradientBrush>
                    </Border.Background>
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="12" ShadowDepth="0" Opacity="0.2" Color="#1E90FF" />
                    </Border.Effect>
                    <StackPanel>
                        <TextBlock
                            Text="SonicVPN"
                            FontWeight="SemiBold"
                            FontSize="14"
                            Foreground="{StaticResource SonicVpnBrush}" />
                        <TextBlock
                            Text="Защита и низкий пинг — в Telegram"
                            FontSize="11"
                            Foreground="#A0AABB"
                            Margin="0,4,0,0"
                            TextWrapping="Wrap" />
                    </StackPanel>
                </Border>

                <!-- Nav Items -->
                <ListBox
                    x:Name="NavList"
                    Background="Transparent"
                    BorderThickness="0"
                    SelectionChanged="NavList_SelectionChanged"
                    Margin="10,6,10,0">
                    <ListBox.ItemContainerStyle>
                        <Style TargetType="ListBoxItem">
                            <Setter Property="Padding" Value="14,12" />
                            <Setter Property="Margin" Value="0,2" />
                            <Setter Property="Cursor" Value="Hand" />
                            <Setter Property="Foreground" Value="#E0E4EA" />
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="ListBoxItem">
                                        <Border
                                            x:Name="Bd"
                                            Background="Transparent"
                                            CornerRadius="8"
                                            Padding="{TemplateBinding Padding}">
                                            <ContentPresenter />
                                        </Border>
                                        <ControlTemplate.Triggers>
                                            <Trigger Property="IsMouseOver" Value="True">
                                                <Setter TargetName="Bd" Property="Background" Value="#18FFFFFF" />
                                            </Trigger>
                                            <Trigger Property="IsSelected" Value="True">
                                                <Setter TargetName="Bd" Property="Background" Value="#2A1E90FF" />
                                                <Setter Property="Foreground" Value="#4DA6FF" />
                                            </Trigger>
                                        </ControlTemplate.Triggers>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </ListBox.ItemContainerStyle>

                    <ListBoxItem Tag="Dashboard">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Home24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Главная" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Tweaks">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="TopSpeed24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Игровые твики" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Services">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Settings24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Службы" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Privacy">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Shield24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Конфиденциальность" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Debloat">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Delete24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Очистка" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Network">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Wifi124" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Сеть" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Drivers">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="DesktopMac24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Драйверы" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                    <ListBoxItem Tag="Power">
                        <StackPanel Orientation="Horizontal">
                            <ui:SymbolIcon Symbol="Flash24" FontSize="18" Margin="0,0,12,0" />
                            <TextBlock Text="Электропитание" VerticalAlignment="Center" FontSize="14" />
                        </StackPanel>
                    </ListBoxItem>
                </ListBox>
            </DockPanel>
        </Border>

        <!-- Content Area -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <ui:TitleBar Title="" ShowMaximize="True" ShowMinimize="True" />

            <Frame
                x:Name="PageFrame"
                Grid.Row="1"
                NavigationUIVisibility="Hidden" />
        </Grid>
    </Grid>
</ui:FluentWindow>
