# Как я написал оптимизатор Windows для геймеров и выложил в open source

Привет, Хабр! Меня зовут Sonic, и я хочу рассказать, как в 2026 году я собрал **SonicBoost** — бесплатную утилиту для тонкой настройки Windows 10/11 под игры. Без воды и маркетинга — чисто технический разбор того, что мешает Windows быть быстрой, и как это исправить одной программой.

## Проблема

Каждый геймер знает ощущение: купил железо за сотни тысяч, а система всё равно тормозит. FPS скачет, пинг прыгает, при ALT+TAB всё зависает на пару секунд. Почему?

Потому что Windows — это не игровая ОС. Это корпоративная система с десятками служб, телеметрии, анимаций и фоновых процессов, которые тихо жрут ваши ресурсы. Xbox Game Bar снимает скриншоты, Cortana слушает микрофон, Windows Search индексирует 500 тысяч файлов, а виджеты грузят новости в фоне.

## Решение: 28 твиков реестра, которые реально работают

Я исследовал каждый параметр реестра, который влияет на производительность в играх. Не мифы из YouTube — а конкретные ключи, которые я проверил на стенде с мониторингом FPS, фреймтаймов и нагрузки.

### Самые мощные твики

**1. Отключение Game Bar и Game DVR**

```
HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\GameDVR
  AppCaptureEnabled = 0

HKLM\SOFTWARE\Policies\Microsoft\Windows\GameDVR
  AllowGameDVR = 0
```

Game Bar — самый жирный оверлей в Windows. Он постоянно мониторит активность, записывает в буфер последние 30 секунд геймплея и дёргает GPU. Выключение даёт ощутимый прирост стабильности FPS.

**2. Аппаратное планирование GPU (HAGS)**

```
HKLM\SYSTEM\CurrentControlSet\Control\GraphicsDrivers
  HwSchMode = 2
```

Hardware-Accelerated GPU Scheduling передаёт планировку задач GPU самой видеокарте вместо CPU. На современных GPU (NVIDIA 10xx+, AMD 5xxx+) это снижает input lag на 5-15%.

**3. Приоритет мультимедийных задач**

```
HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Multimedia\SystemProfile
  SystemResponsiveness = 0
  NetworkThrottlingIndex = 0xFFFFFFFF
```

По умолчанию Windows резервирует 20% CPU для системных задач даже когда вы играете. `SystemResponsiveness = 0` говорит: «отдай всё играм». А `NetworkThrottlingIndex = 0xFFFFFFFF` убирает искусственный лимит в 10 мс на сетевые пакеты.

**4. Высокое разрешение таймера**

```
HKLM\SYSTEM\CurrentControlSet\Control\Session Manager\kernel
  GlobalTimerResolutionRequests = 1
```

Windows по умолчанию работает с разрешением таймера ~15.6 мс. Для игры на 144+ Гц это катастрофа — фреймы буквально не попадают в тайминг. Этот твик включает глобальное высокое разрешение (~0.5 мс).

**5. Отключение фоновых приложений**

```
HKCU\SOFTWARE\Microsoft\Windows\CurrentVersion\BackgroundAccessApplications
  GlobalUserDisabled = 1
```

UWP-приложения (Погода, Новости, Почта) тихо работают в фоне и жрут RAM/CPU. Одним ключом — все в бан.

### Полный список — 28 твиков

| Категория | Твик | Риск |
|-----------|------|------|
| Игры | Отключить Game Bar | Безопасно |
| Игры | Отключить Game DVR | Безопасно |
| Игры | Отключить оптимизацию полноэкранного режима | Безопасно |
| Игры | Аппаратное планирование GPU | Умеренно |
| Игры | Включить игровой режим | Безопасно |
| Игры | Отключить ускорение мыши | Безопасно |
| Игры | Высокий приоритет GPU | Умеренно |
| Игры | Высокий приоритет CPU | Умеренно |
| Игры | Высокое разрешение таймера | Продвинуто |
| Игры | Отключить мониторинг Xbox | Безопасно |
| Игры | Приоритет мультимедийных задач | Безопасно |
| Производительность | Отключить визуальные эффекты | Безопасно |
| Производительность | Отключить прозрачность | Безопасно |
| Производительность | Отключить анимации окон | Безопасно |
| Производительность | Отключить Cortana | Безопасно |
| Производительность | Отключить веб-поиск в Пуске | Безопасно |
| Производительность | Отключить виджеты | Безопасно |
| Производительность | Отключить троттлинг питания | Умеренно |
| Производительность | Отключить Prefetch | Умеренно |
| Производительность | Отключить SysMain / Superfetch | Безопасно |
| Производительность | Отключить быстрый запуск | Безопасно |
| Производительность | Отключить фоновые приложения | Безопасно |
| Производительность | Убрать задержку автозагрузки | Безопасно |
| Производительность | Отключить контроль памяти | Безопасно |
| Производительность | Отключить рекламу на экране блокировки | Безопасно |
| Производительность | Отключить предлагаемые приложения | Безопасно |
| Производительность | Увеличить системный кэш | Умеренно |
| Сеть | Отключить сетевой троттлинг | Безопасно |

## Архитектура

SonicBoost построен на **.NET 8 + WPF UI** (Fluent Design с Mica-эффектом). Архитектура — классический MVVM с `CommunityToolkit.Mvvm`:

```
SonicBoost/
├── SonicBoost.Core/          # Бизнес-логика (нет зависимости от UI)
│   ├── Tweaks/               # Движок твиков + определения
│   ├── Services/             # Управление службами Windows
│   ├── Privacy/              # Блокировка телеметрии
│   ├── Network/              # Оптимизация TCP/DNS
│   ├── Debloat/              # Удаление bloatware
│   ├── Power/                # Планы электропитания
│   ├── Drivers/              # Определение оборудования
│   └── Backup/               # Бэкап настроек перед изменениями
└── SonicBoost/               # WPF UI
    ├── Views/                # XAML-страницы
    ├── ViewModels/           # MVVM ViewModels
    └── Helpers/              # Конвертеры, утилиты
```

Ключевой принцип: **каждый твик — это `TweakItem`** с полями `RegistryPath`, `RegistryKey`, `EnabledValue`, `DisabledValue`. Движок умеет:
1. Прочитать текущее значение из реестра
2. Сделать бэкап
3. Записать новое значение
4. Откатить к исходному

## Обратная связь в реальном времени

Одна из главных проблем подобных утилит — ты нажал кнопку и не понимаешь: «а оно вообще сработало?». В SonicBoost напротив каждого твика стоит цветной бейдж:

- **Включено** (зелёный) — твик применён, реестр подтверждает
- **Выключено** (красный) — стандартное значение

При нажатии на тогл бейдж мгновенно меняет цвет и текст. Плюс статус-бар сверху страницы показывает: «Применено: Отключить Game DVR» или «Ошибка: нет прав».

## Сеть и DNS

В разделе «Сеть» — 4 TCP-оптимизации:

- **Отключить алгоритм Нейгла** — пакеты отправляются сразу, а не буферизируются
- **Отключить TCP-метки времени** — убирает оверхед в каждом пакете
- **Оптимизировать частоту TCP ACK** — подтверждения идут чаще, пинг ниже
- **Отключить сетевой троттлинг** — убирает лимит в 10 пакетов

Плюс быстрая смена DNS на Cloudflare (1.1.1.1), Google (8.8.8.8), Quad9 или OpenDNS — одной кнопкой для всех активных интерфейсов.

## Конфиденциальность: прощай, телеметрия

9 твиков + блокировка хостов:

- Телеметрия → 0 (только безопасность)
- Рекламный ID → отключён
- Журнал активности → отключён
- Геолокация → отключена
- Windows Copilot → отключён
- Windows Recall → отключён
- 14 хостов Microsoft → в hosts как `0.0.0.0`

## Удаление bloatware

25+ предустановленных приложений, которые можно удалить одним кликом: Cortana, Teams, Candy Crush, Disney+, Spotify, Clipchamp и другие. Плюс очистка temp-файлов с подсчётом освобождённого места.

## Как попробовать

1. Скачай из [GitHub Releases](https://github.com/by-sonic/SonicBoost/releases/latest)
2. Запусти от имени администратора
3. Пройдись по вкладкам и включи нужные твики
4. Перезагрузись для максимального эффекта

Или собери из исходников:

```bash
git clone https://github.com/by-sonic/SonicBoost.git
cd SonicBoost
dotnet publish src/SonicBoost/SonicBoost.csproj -c Release -r win-x64 --self-contained -p:PublishSingleFile=true -o publish
```

## Итого

**SonicBoost** — это не магия и не плацебо. Это конкретные параметры реестра и системные настройки, которые Microsoft делает по умолчанию для универсальности, а не для производительности. Мы просто собрали их в одном месте с красивым UI и объяснениями.

Код открыт, лицензия MIT. Ставьте звёзды, форкайте, предлагайте свои твики.

**GitHub:** [github.com/by-sonic/SonicBoost](https://github.com/by-sonic/SonicBoost)  
**VPN для геймеров:** [@bysonicvpn_bot](https://t.me/bysonicvpn_bot)

---

*Теги: Windows, оптимизация, игры, gaming, WPF, .NET, C#, open source, реестр*
